/* 🚀 高速スムーズスクロール最適化（競合問題を修正） */

/* 全体のスクロール最適化 */
html {
  scroll-behavior: smooth;
  /* スクロール時のパフォーマンス最適化 */
  -webkit-overflow-scrolling: touch;
  scroll-padding-top: 80px;
}

body {
  /* GPU加速でスムーズスクロール（ナビゲーションアニメーションと競合しないように調整） */
  -webkit-overflow-scrolling: touch;
}

/* 画像の遷移最適化（フォント・レイアウトに影響しないように修正） */
img:not([data-priority="true"]):not([loading="eager"]) {
  /* レイアウトシフト防止 */
  height: auto;
  max-width: 100%;
}

/* 重要画像のみに特別な最適化を適用 */
img[loading="eager"],
img[data-priority="true"] {
  /* 読み込み時のスムーズ表示 */
  transition: opacity 0.2s ease, filter 0.2s ease;
  
  /* 重要画像用：即座に表示開始 */
  opacity: 1;
  filter: blur(0);
  
  /* チラつき完全防止 */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimizeQuality;
}

/* Next.js Image コンポーネントの最適化（アニメーションと競合しないように調整） */
[data-nimg]:not(.navText *):not(.logoText *):not(.mobileLogoText *) {
  /* 重要画像用：高速表示 */
  transition: opacity 0.1s ease, filter 0.1s ease;
  
  /* 即座に表示開始（重要画像） */
  opacity: 1;
  filter: blur(0);
}

/* fill画像のみ最適化 */
[data-nimg="fill"] {
  position: absolute;
  inset: 0;
  object-fit: cover;
  width: 100%;
  height: 100%;
}

/* 作品カードの最適化 */
.workCard, .mobileWorkCard {  
  /* ホバー時の滑らかな変化 */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.workCard:hover, .mobileWorkCard:hover {
  transform: translateY(-2px);
}

/* ローディングアニメーションの最適化 */
@keyframes smoothFadeIn {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.workImageContainer {
  /* 画像コンテナの最適化 */
  animation: smoothFadeIn 0.2s ease forwards;
  
  /* 画像のアスペクト比固定でレイアウトシフト防止 */
  aspect-ratio: 440 / 320;
  overflow: hidden;
  position: relative;
  background-color: #f5f5f5;
  
  img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 1;
    filter: blur(0);
  }
}

/* 重要画像最適化 */
.image-priority-high {
  opacity: 1 !important;
  filter: blur(0) !important;
  transition-duration: 0.05s !important;
}

/* GIF画像最適化 */
img[src*=".GIF"], img[src*=".gif"] {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* 🎯 ヒーロー画像専用：真っ白な画面を完全に防止 */
.heroImageWrapper {
  /* 画像再読み込み時の安定性確保 */
  position: relative;
  background: linear-gradient(135deg, #f1f3f4 0%, #e8eaed 50%, #dadce0 100%) !important;
}

.heroImageWrapper img {
  /* 真っ白画面防止の最強設定 */
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  
  /* 再読み込み防止の強力な設定 */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimizeQuality;
  
  /* 即座に表示 */
  filter: none !important;
  
  /* Next.js Imageのデフォルトスタイルを強制上書き */
  position: relative !important;
  z-index: 2 !important;
}

/* Next.js Imageコンポーネントの真っ白画面防止 */
.heroSection [data-nimg] {
  /* ヒーローセクション内の全てのImageコンポーネント */
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  transition: none !important;
}
